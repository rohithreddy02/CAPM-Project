<mvc:View
  controllerName="ui5.controller.delivery"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.uxap"
  xmlns:m="sap.m"
  xmlns:u="sap.ui.unified"
  xmlns:core="sap.ui.core">

  <ObjectPageLayout
    showHeaderContent="true"
    alwaysShowContentHeader="true">
      <headerTitle>
        <ObjectPageDynamicHeaderTitle>
          <actions>
            <m:SearchField
                class="sapUiSmallMargin"
                id="searchOrder"
                width="auto"
                placeholder="Search by Order ID"
                liveChange="onSearchOrder" />
            <core:Icon src="sap-icon://customer" size="2rem" tooltip="Delivery Agent"></core:Icon>
          </actions>
          <heading>
            <m:Title text="Delivery Agent" level="H1" />
          </heading>
        </ObjectPageDynamicHeaderTitle>
      </headerTitle>
    <sections>
      <ObjectPageSection title="Active Orders">
        <subSections>
          <ObjectPageSubSection>
            <blocks>
              <m:List
                id="orderList"
                items="{data>/}"
                noDataText="No active orders found">

                <m:items>
                  <m:CustomListItem>
                    <m:HBox justifyContent="SpaceBetween" alignItems="Center">
                      <m:VBox class="sapUiSmallMargin">
                        <m:ObjectIdentifier title="Order ID: {data>ID}"/>
                        <core:Icon src="sap-icon://shipping-status" size="1.5rem" class="sapUiTinyMarginEnd" />
                        <m:ObjectStatus
                          text="{data>status}"
                          state="{= ${data>status} === 'Delivered' ? 'Success' : 'Warning' }" />
                      </m:VBox>
                      <u:FileUploader
			                    id="fileUploader"
			                    name="myFileUpload"
			                    uploadUrl="upload/"
			                    tooltip="Upload your file to the local server"
			                    uploadComplete="handleUploadComplete"/>
                      <m:Button
                        text="Mark Delivered"
                        type="Emphasized"
                        visible="{= ${data>status} !== 'Delivered' }"
                        press="onMarkDelivered" />
                    </m:HBox>
                  </m:CustomListItem>
                </m:items>
              </m:List>
            </blocks>
          </ObjectPageSubSection>
        </subSections>
      </ObjectPageSection>
    </sections>
  </ObjectPageLayout>
</mvc:View>
