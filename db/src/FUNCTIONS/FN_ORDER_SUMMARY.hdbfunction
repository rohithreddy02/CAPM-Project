FUNCTION "FN_ORDER_SUMMARY" (
    IN order_ID NVARCHAR(36)
)
RETURNS TABLE (
    total_price DECIMAL(18,2)
)
LANGUAGE SQLSCRIPT
SQL SECURITY INVOKER
AS
BEGIN
    RETURN
        SELECT SUM(OI."QUANTITY" * OI."PRICE") AS total_price
        FROM "DATA_ORDERITEMS" AS OI
        JOIN "DATA_ORDERS" AS O ON O."ID" = OI."ORDER_ID"
        WHERE O."ID" = :order_ID;
END;
